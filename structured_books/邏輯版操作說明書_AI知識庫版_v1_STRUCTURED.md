# 邏輯版操作說明書 - STRUCTURED 版

> **說明**：本版本忠於原文，僅做結構化整理，建立清晰的章節標題與分類。

---


> **重要說明**：本文件為 AI 知識庫格式，每段內容都已標記分類標籤，可直接被 AI 模型解析、轉換為 JSON、向量化或規則引擎使用。
> 
> **原始文件**：`docs/邏輯版操作說明書.txt`（未修改）
> **建立日期**：2024-11-28


## 文件說明

本文件是 J-GOD 股神作戰系統的核心操作邏輯來源，定義了系統的三層架構、六種交易模式、以及模式 2 的萬分之三風險控管機制。

本文檔定義了 J-GOD 系統的「操作邏輯」核心框架，包括：
- 三層架構：預測層、策略層、介面層
- 六種交易模式（Mode 1-6）的詳細邏輯
- 模式 2 的萬分之三/萬分之一風險控管機制
- 三重審查決策樹
- 多頻率預測引擎的設計


## 一、整體架構：三層設計


### 1.1 預測層：多時間框架 AI 大腦

**對象**：大盤 / 個股

**頻率定義**：
- **超短**：5 秒、30 秒
- **短**：1 分、5 分
- **中**：10 分、30 分、60 分
- **日**：昨天預測今天、今天預測明天

**每一個「預測」都要輸出幾個核心欄位**：
- **方向**：Long / Short / Neutral
- **預測目標價**：例如今天大盤 26975
- **信心度**：0～100%
- **預期波動 / 風險**：大概會甩多大
- **（大盤當沖額外）**：預期短線反轉價位（例如現在 26945，預測會拉回 26940）


### 1.2 策略層：六種「人類玩法」模式

**六種操作模式的定義**：

1. **模式 1**：大盤當沖，高頻多空刷（多＋空都做）
2. **模式 2**：大盤當沖，只做多
3. **模式 3**：大盤當沖，只做空
4. **模式 4**：個股當沖，挑出明天 TOP300 上漲／下跌標的（排序邏輯）
5. **模式 5**：只做「漲的個股」，而且要「昨日 EOD + 今日盤中」一致看多
6. **模式 6**：只做「跌的個股」，邏輯同上但反向

**核心設計理念**：
「AI 幫你先算好世界長什麼樣子（預測層）→ 你只負責在介面上選你要玩的模式（策略層）。」


### 1.3 介面／螢幕層：CEO 的看盤室

**螢幕分工設計**（不是亂加螢幕）：

**螢幕 A：純粹用來「出手」的主控台**
- 當沖相關的所有即時訊號（模式 1 / 2 / 3 + 5 / 6 的即時進出點）
- 當前部位、損益、距離目標預測點位還差幾點
- 哪裡該賣、哪裡該反手、是不是到了萬分之三要警戒

**螢幕 B：用來「看系統自己好不好」的監控台**
- 預測失準排行榜（哪個時間框架、哪一種模型最近常錯）
- 模型健康度（勝率、Sharpe 等等）
- 個股 TOP300 清單
- 收盤後檢討／回測結果

**重點不是「六個螢幕」，而是「一眼能把責任分清楚」**：
哪一塊是今天要不要出手，哪一塊是這套系統最近有沒有瘋掉。


## 二、模式 1 vs 模式 2：邏輯拆解


### 2.1 模式 1：大盤當沖「多空來回刷」（高頻反轉）

**精神**：
- 什麼都做，只要有波動就想賺點數
- 重點是「抓反轉」：多單出在高點、立刻反手放空；空單補在低點、立刻反手做多
- 單筆損益不一定很大，但靠「次數 + 命中率」堆起來

**操作循環（精簡版）**：

1. **系統預測**：
   - 例如：現在 26930 → 預測會漲到 26945，再回到 26940

2. **系統建議**：
   - 在接近預測上緣前做多（可能在 26933～26935 進場）
   - 到預測高點附近（26945）建議賣出平多
   - 5 秒預測顯示接下來會跌 → 立刻建議放空（例如 26944 空）
   - 跌到預測下緣（26932～26935）建議補空，若又預測會漲 → 立刻建議再做多

3. **這個流程**：「多 → 賣 → 空 → 補 → 多 → …」一直刷
   - 核心關鍵是：極短線預測 + 反轉偵測
   - 你不管方向，只要 AI 說這段有機會賺，就去刷


### 2.2 模式 2：大盤當沖「只做多」（單向趨勢優化）

**重要精神**：

1. 只做多，不放空（寫得很明確）
2. 還是當沖，但你跟的是「今日大方向預測」，不是每一個反轉都要吃
3. 最重要兩個概念：
   - **最終目標價**（例如：今日預測 26975）
   - **萬分之三的容忍／警戒機制**


## 三、模式 2 邏輯：重整成「一套規則」


### 3.1 步驟 1：今天一開始，系統先定義幾個東西

- **今日預測終點**：例如 26975
- **你實際進場點**：例如 26930（系統建議進場）
- **容忍與檢討標準**（全部是對「預測終點」來算，不是對你買價）：
  - **萬分之三（0.03%）** ＝ 用來當「預測有沒有出事」的檢討門檻
  - **萬分之二（0.02%）** ＝ 提前警告，提醒 AI 自己要再檢查一次

**很重要**：
- ✅ 萬分之三是在看「預測 vs 現實」有沒有脫鉤
- ❌ 不是在看「你買多少 vs 現在多少」


### 3.2 步驟 2：盤中正常波動的處理（預測沒變，價格在合理甩）

**情境**：
- 你在 26933 做多
- 系統還是預測今天會往 26943～26953 方向走
- 但盤中可能甩到 26928 再回 26933

**你的要求是**：
- 這種「預測還在、波動沒爆表」的情況
- 系統不應該一直叫你賣、一直砍來砍去
- 否則你會被正常噪音洗掉

**所以邏輯可以整理成**：

1. 只要「預測終點」沒改變，而且價格偏離終點還在萬分之二以內：
   - 解讀為「正常波動」
   - 系統大腦的態度：
     - 預測仍有效 → 建議「續抱」
     - 介面上可以是：綠燈但有波動條，提醒你「還在路上」

2. 波動拉大到接近萬分之二 ~ 萬分之三：
   - 這是你說的：「開始要思考是不是有問題」
   - 系統行為應該改成：
     - 開橘燈警告：「預測 vs 現實偏離偏大，正在重新檢查」
     - AI 問自己幾個問題（不用給你看內部，但會給你結果）：
       - 其他時間框架（5 分、10 分、30 分）方向有沒有翻？
       - 成交量有沒有異常？
       - 是否有明顯新事件（這可留給之後資料源）
     - 如果檢查後發現：「大方向還是多，只是中間噪音比較醜」 →
       - 系統大腦結論：「先續抱，但標記為「高風險持有」」
       - 介面上可以寫：「AI 審核後仍建議續抱，信心度 XX%」


### 3.3 步驟 3：真的撞到「萬分之三」時，大腦要做的三選一

**核心問題**：
「若到萬分之三～系統也要立即預判～到底有無失準？… 是繼續堅持預測？還是查找原因修改預測？… 是撐到萬分之三才調整？還是關盤後再檢討？」

**決策樹：當「偏離預測終點 >= 萬分之三」時**

**第一層判斷：中短線共識是不是變了？**

**檢查**：
- 5 分 / 10 分 / 30 分 預測方向
- 這些時間框架的 Confidence 是否大幅下降
- 是否從一開始的「一致看多」→ 變成「分裂」或「轉空」

**情況 A：中短線也翻空、或信心崩掉**

**代表**：
- 不是單純噪音，而是整體趨勢可能真的變了。

**系統行為應該是**：

1. 建議「賣出平倉」（止損）
2. 把這一筆標記為：「預測失準事件」丟到「失準分析」介面
3. 收盤後檢討：
   - 是哪一個模型在撐錯方向？
   - 門檻（萬分之三）是否需要動態調整？

**這條路是**：「先活下來，再檢討」。

**情況 B：中短線還是同方向（都還是看多），只是價格甩很醜**

這個才是你在掙扎的點：「AI 腦還是很堅持，但已經撞到你訂的萬分之三門檻」。

這裡其實可以讓你自己選哲學，我幫你拆成兩種風格：

**方案 B-1：保守派（以「不賠」為最高原則）**

- **規則**：只要偏離到萬分之三，不管 AI 心裡多堅持 → 一律先賣出
- **但 AI 仍可以在「虛擬帳戶」裡繼續模擬**：
  - 假裝沒賣、繼續走完一整天
  - 收盤後比較：
    - 真實賣掉 vs 假如當時不賣，誰比較好？

**好處**：
- 風險控制極清楚
- 你的人生壓力小很多
- 同時又讓 AI 有學習數據（知道自己「硬撐」會不會比較好）

**壞處**：
- 有些波動其實撐過去會賺，但你會被「門檻」提前踢出去

**方案 B-2：進取派（尊重 AI 預測，但要「留案底」）**

- **規則**：偏離到萬分之三時，如果：
  1. 中短線模型一致還看多
  2. 信心度仍在某個門檻之上（例如 >70%）
- **👉 允許 AI 做一次「堅持預測」的決策**
- **系統要做兩件事**：
  1. 在介面上非常清楚標記：「⚠️ 已超過萬分之三，但 AI 決定續抱」
  2. 把這筆交易強制列為「重點檢討案例」，收盤後一定要被檢視

**好處**：
- 讓 AI 有「表態」的空間，不是被固定閾值綁死
- 你可以看到「AI 堅持的勝率到底高不高」

**壞處**：
- 心理壓力比較大
- 這會讓你的「不賠哲學」變成「可控制的小賠 + 更聰明的 AI」

**情況 C：你可以折衷一個「上限」**

你也可以這樣定規則：

- 超過萬分之三 → 允許 AI 最多「堅持一次」
- 如果堅持後，偏離再擴大（例如到萬分之四）→ 一律強制出場

**這就變成**：
- 萬分之三：AI 跟你站在十字路口一起開會
- 萬分之四：不開會了，先跑再說


## 四、總結版說法（Final Summary）

如果你要之後跟 Cursor / 你的團隊講「這顆腦要幹嘛」，可以這樣說：

1. 我們有六種操作模式，是「用戶行為」層的東西，不是模型本身。
2. 所有模式的基礎，都是同一套「多時間框架預測引擎」。
3. **模式 1**：大盤當沖，多空都做，重點是抓短線反轉來回刷單。
4. **模式 2**：大盤當沖，只做多，重點是跟著「當日終點預測」走，並用萬分之二／萬分之三作為風險與檢討的控制線。
5. **萬分之三看的不是「我的成本 vs 現在價位」，而是「實際市場走到哪裡 vs 當初預測的終點」**。
6. 當偏離達到萬分之三，系統會啟動「三重審查決策樹」：
   1. 優先檢查中短線趨勢是否已經崩壞，以決定是否應該立即止損；
   2. 只有在中短線趨勢仍維持一致看多時，AI 才被允許在萬分之四這條絕對底線之前，於嚴格監控下選擇續抱；
   3. 所有觸及臨界點的決策，將一律進入「強制虛擬模擬與事後比對」，作為 AI 自我批判與優化學習的核心樣本。
7. 這樣的設計，讓系統不只是輔助下單的工具，而是一個會持續反省、持續進化的智慧夥伴——這才是符合 CEO 級儀表板真正價值的 AI 交易大腦。


## 五、多頻率預測引擎（The Prediction Engine）


### 5.1 核心系統架構與預測邏輯優化

**兩大核心組件**：
1. 多頻率預測引擎
2. 客製化決策篩選器


### 5.2 多頻率預測引擎必須同時提供跨時間維度的預測

**預測類型**：

| 預測類型 | 時間框架 (Timeframe, T) | 目的 |
|---------|------------------------|------|
| EOD / 隔日預測 (T-Daily) | 每日收盤（昨日預測） | 作為隔日交易的初始偏向 (Initial Bias) 和 Mode 4/5/6 的主要輸入 |
| 盤中即時預測 (T-Intraday) | 5s, 30s, 1m, 5m, 10m, 30m, 1h | 盤中方向性、波動性、目標價的即時修正 (Real-time Correction)，用於 Mode 1/2/3 |


### 5.3 標準化預測輸出（Critical Data Structure）

不論是期指還是個股，每次預測（在每個時間框架下）都應包含以下關鍵欄位：

| 欄位名稱 (Field) | 說明 | 關鍵用途 |
|-----------------|------|---------|
| T | 預測時間框架 (e.g., 5s, 1m, Daily) | 區分預測的時效性 |
| Direction | 多/空/中立 (Long/Short/Neutral) | 基礎方向判斷 |
| Magnitude | 預測波動幅度 (%) 或目標點數 (Target Point) | 衡量預期的上漲/下跌強度（用於 Mode 4 排序） |
| Confidence | 機率評分 (0%~100%) | 預測的可靠性 |
| Risk_Level | 預期波動率 (ATR) | 用於 Mode 2/3 判斷當前是否適合進場（波動太小/太大都不利） |


## 六、六大交易模式的決策邏輯優化


### 6.1 模式 1：台期指當沖 - 趨勢反轉刷單 (Swing Trading)

**邏輯目標**：最大化捕捉 Direction 轉折。

**決策依據 (Action Trigger)**：

| 動作 | 觸發條件 |
|------|---------|
| 買多 | T-Intraday(5s) 預測從 Short 或 Neutral 轉變為 Long，執行 Buy/平空 |
| 平倉/轉空 | T-Intraday(5s) 預測從 Long 轉變為 Short 或 Neutral，執行 Sell/平多 |

**備註**：需要極低的延遲和極高的交易速度。


### 6.2 模式 2：台期指當沖 - 純買多鎖利 (Pure Long & Volume)

**邏輯目標**：賺取手續費，鎖定萬分之三（假設 0.03%）的微薄利潤，絕對不賠。

**進場條件**：

1. T-Daily 預測為 Long。 AND
2. T-Intraday(1m/5m) 預測為 Long 且 Confidence > 75%。

**出場條件**：

1. **獲利鎖定**：達到 0.03% 報酬時，立即平倉 (Sell)。 OR
2. **止損**：預測方向轉變為 Short 或累積損失超過預設的極小止損線。

**優化重點**：
- 等待「精準預測提醒」（高信心度）
- 獲利優先，量大為王


### 6.3 模式 3：台期指當沖 - 純買空鎖利 (Pure Short & Volume)

**邏輯目標**：賺取手續費，鎖定萬分之三的微薄利潤，絕對不賠。與 Mode 2 邏輯對稱。

**進場條件**：

1. T-Daily 預測為 Short。 AND
2. T-Intraday(1m/5m) 預測為 Short 且 Confidence > 75%。

**出場條件**：

1. **獲利鎖定**：達到 0.03% 報酬時，立即平倉 (Buy to Cover)。 OR
2. **止損**：預測方向轉變為 Long 或累積損失超過預設的極小止損線。

**優化重點**：若大盤一飛沖天（例如所有 T-Intraday 預測均為 Strong Buy），系統應顯示「不適合放空」。


### 6.4 模式 4：個股當沖 - TOP 300 篩選與排序

**邏輯目標**：產生隔日最可能漲跌的 300 支股票清單。關鍵在於多重排序邏輯。

**排序條件（長）**：

1. Confidence（機率評分）越高越前
2. Magnitude（預測漲跌幅，漲停/跌停優先）
3. 股價（Price）越高越前（股價高的個股通常代表較高的市場關注度或權重）

**排序條件（短）**：

1. Confidence（機率評分）越高越前
2. Magnitude（預測漲跌幅，漲停/跌停優先）
3. 股價（Price）越高越前

**備註**：需每天 EOD 執行一次，產出 TOP 300 列表。


### 6.5 模式 5/6：個股當沖 - 漲跌訊號鎖定 (Confirmation)

**邏輯目標**：只交易「被證實」的個股，降低誤判率。必須結合 EOD 預測和即時預測的共識 (Consensus)。

**只買漲 (Mode 5)**：

1. 昨日 EOD 預測為 Long。 AND
2. 當日 T-Intraday(1m) 預測持續為 Long。

**只買跌 (Mode 6)**：

1. 昨日 EOD 預測為 Short。 AND
2. 當日 T-Intraday(1m) 預測持續為 Short。

**優化重點**：僅針對具備雙重預測確認的個股執行買入操作。


## 七、系統介面（Dashboard）建議


### 7.1 整合的「AI 預測儀表板」

與其設置六個獨立螢幕，不如設計一個整合的「AI 預測儀表板」，只需 1-2 個高解析度螢幕即可高效操作。

**介面區域 (Panel)**：

| 介面區域 | 顯示內容 | 主要用途 |
|---------|---------|---------|
| 1. 即時預測修正區 | T-Intraday (5s, 30s, 1m) 預測的趨勢圖和數據，顯示 Direction, Confidence, 和 Risk_Level | 供 Mode 1/2/3 使用，捕捉轉折點和進場時機 |
| 2. 目標/累積淨值區 | 顯示預設目標 (27000) vs. 當前預測目標，以及 Mode 2/3 的累積淨值與當前損益 (PnL) | 供 Mode 2/3 使用，執行 0.03% 獲利鎖定 |
| 3. 隔日個股清單區 | 顯示 Mode 4 產出的 TOP 300 漲/跌股清單，可按 Confidence 或 Magnitude 篩選 | 供 Mode 4/5/6 使用，快速瀏覽隔日交易機會 |
| 4. 訊號共識篩選器 | 顯示 Mode 5/6 的已確認 (Confirmed) 股票清單（即 EOD + Intraday 雙重確認） | 供 Mode 5/6 使用，提供高度可靠的交易標的 |


## 八、總結優化結果

**需求與優化對應**：

| 您的需求 | 優化後的邏輯/架構 |
|---------|------------------|
| 多頻率提醒 | 統一為多頻率預測引擎 (5s~1h)，介面顯示最新的預測數據，並以警示顏色或聲音取代單純的「提醒」 |
| 最大獲利點/不賠 | 引入 0.03% 微利鎖定機制，取代模糊的「最大獲利點」，將策略從追求單筆最大化轉為追求總量最大化 |
| TOP 300 排序 | 採用明確的三層排序規則（機率 → 漲跌幅 → 股價），確保排名的邏輯清晰且符合您的量化交易習慣 |
| 六個螢幕 | 建議整合為單一儀表板，分區顯示即時、趨勢、目標、個股四種資訊 |


## 九、PerformanceAnalyzer 擴展建議

下一步，我們應該將重點放在 PerformanceAnalyzer 的擴展上，以評估這些多頻率策略的表現。

**關鍵指標建議**：

1. **Trade Count (交易次數)**：用於評估 Mode 1/2/3 的刷單量
2. **Average Trade PnL (平均單次損益)**：用於驗證 0.03% 鎖利是否有效

*本文件基於原始對話內容整理，所有技術邏輯與戰略思考均已完整保留。*

